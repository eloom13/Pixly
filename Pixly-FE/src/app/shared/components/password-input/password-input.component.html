<div class="form-group">
  <div class="input-group">
    <input
      [type]="isVisible ? 'text' : 'password'"
      [formControl]="control"
      class="form-control"
      [class.is-invalid]="showError"
      placeholder="{{label}}"
      [id]="label"
    />
    <button
      *ngIf="showToggle"
      type="button"
      class="btn btn-outline-secondary p-2"
      (click)="onToggleVisibility()"
    >
      <i [class]="isVisible ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
    </button>
  </div>

  <!-- Password validation errors as a list -->
  <div *ngIf="showError" class="invalid-feedback d-block mt-1">
    <ul class="mb-0 ps-3 small">
      <!-- Password match error -->
      <li *ngIf="showPasswordMatchError" class="text-danger">Passwords do not match</li>

      <!-- Required field error -->
      <li *ngIf="control.errors?.['required']" class="text-danger">Required</li>

      <!-- Length requirements -->
      <li *ngIf="control.errors?.['minlength']" class="text-danger">
        Must be at least {{control.errors?.['minlength'].requiredLength}} characters
      </li>
      <li *ngIf="control.errors?.['maxlength']" class="text-danger">
        Must be at most {{control.errors?.['maxlength'].requiredLength}} characters
      </li>

      <!-- Character type requirements -->
      <li *ngIf="control.errors?.['hasNumber']" class="text-danger">
        Must contain at least one number
      </li>
      <li *ngIf="control.errors?.['hasCapitalCase']" class="text-danger">
        Must contain at least one uppercase letter
      </li>
      <li *ngIf="control.errors?.['hasSmallCase']" class="text-danger">
        Must contain at least one lowercase letter
      </li>
      <li *ngIf="control.errors?.['hasSpecialCharacters']" class="text-danger">
        Must contain at least one special character
      </li>
    </ul>
  </div>
</div>
